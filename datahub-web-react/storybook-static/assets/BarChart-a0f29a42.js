import{j as s}from"./jsx-runtime-f961835c.js";import{R as S,r as m}from"./index-f80c8c95.js";import{s as he}from"./styled-components.browser.esm-f891f5b9.js";import{P as le,D as ve,a as Ae}from"./Popover-024376aa.js";import{w as Ve,d as Ee,e as ue,f as qe,h as de,i as J,u as ke,X as Te,B as Ce,b as xe,a as Le,j as we,k as Q,l as z,C as ce,g as Be,m as Oe,A as me,L as De,G as je,T as Fe}from"./utils-8bad284d.js";import{B as Me}from"./BarRounded-86230f55.js";import{T as _e,L as pe}from"./Axis-806b9145.js";import{d as Re}from"./dayjs.min-b50de240.js";import{c as be}from"./index-9b4c0917.js";var $e=["bars","horizontal","xScale","yScale","radius","radiusAll","radiusTop","radiusRight","radiusBottom","radiusLeft"],Ne=["key"];function W(){return W=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},W.apply(this,arguments)}function fe(e,a){if(e==null)return{};var t={},n=Object.keys(e),o,r;for(r=0;r<n.length;r++)o=n[r],!(a.indexOf(o)>=0)&&(t[o]=e[o]);return t}function Ie(e){var a=e.bars;e.horizontal,e.xScale,e.yScale;var t=e.radius,n=e.radiusAll,o=e.radiusTop,r=e.radiusRight,A=e.radiusBottom,d=e.radiusLeft,f=fe(e,$e),y=!!(f.onFocus||f.onBlur);return S.createElement(S.Fragment,null,a.map(function(V){var E=V.key,q=fe(V,Ne);return t==null?S.createElement("rect",W({key:E,className:"visx-bar",tabIndex:y?0:void 0},q,f)):S.createElement(Me,W({key:E,className:"visx-bar",tabIndex:y?0:void 0,radius:t,all:n,top:o,right:r,bottom:A,left:d},q,f))}))}var Ye=["BarsComponent","barPadding","colorAccessor","data","dataKey","onBlur","onFocus","onPointerMove","onPointerOut","onPointerUp","onPointerDown","enableEvents","xAccessor","xScale","yAccessor","yScale"];function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},ee.apply(this,arguments)}function He(e,a){if(e==null)return{};var t={},n=Object.keys(e),o,r;for(r=0;r<n.length;r++)o=n[r],!(a.indexOf(o)>=0)&&(t[o]=e[o]);return t}var Xe=function(a,t){return a*(1-Math.min(1,Math.max(0,t)))};function ge(e){var a,t,n,o=e.BarsComponent,r=e.barPadding,A=r===void 0?.1:r,d=e.colorAccessor,f=e.data,y=e.dataKey,V=e.onBlur,E=e.onFocus,q=e.onPointerMove,G=e.onPointerOut,T=e.onPointerUp,F=e.onPointerDown,C=e.enableEvents,M=C===void 0?!0:C,L=e.xAccessor,b=e.xScale,p=e.yAccessor,h=e.yScale,_=He(e,Ye),v=m.useContext(Ee),R=v.colorScale,c=v.horizontal,$=v.theme,N=v.innerWidth,U=N===void 0?0:N,k=v.innerHeight,w=k===void 0?0:k,I=m.useMemo(function(){return ue(b,L)},[b,L]),Y=m.useMemo(function(){return ue(h,p)},[h,p]),u=qe(c?h:b),i=u||Xe((c?w:U)/f.length,A),l=m.useMemo(function(){return b?de(b):0},[b]),g=m.useMemo(function(){return h?de(h):0},[h]),P=(a=(t=R?.(y))!=null?t:$==null||(n=$.colors)==null?void 0:n[0])!=null?a:"#222",H=m.useMemo(function(){var X=c?0:-i/2,Se=c?-i/2:0;return f.map(function(D,ie){var se,K=I(D)+X;if(!J(K))return null;var Z=Y(D)+Se;if(!J(Z))return null;var j=c?K-l:Z-g;return J(j)?{key:""+ie,x:c?l+Math.min(0,j):K,y:c?Z:g+Math.min(0,j),width:c?Math.abs(j):i,height:c?i:Math.abs(j),fill:(se=d?.(D,ie))!=null?se:P}:null}).filter(function(D){return D})},[i,P,d,f,I,Y,c,l,g]),B=Ce+"-"+y,O=ke({dataKey:y,enableEvents:M,onBlur:V,onFocus:E,onPointerMove:q,onPointerOut:G,onPointerUp:T,onPointerDown:F,source:B,allowedSources:[Te,B]});return S.createElement("g",{className:"vx-bar-series"},S.createElement(o,ee({bars:H,horizontal:c,xScale:b,yScale:h},O,_)))}ge.propTypes={barPadding:le.number,colorAccessor:le.func};const We=Ve(ge);var Ge=["colorAccessor"];function te(){return te=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},te.apply(this,arguments)}function Ue(e,a){if(e==null)return{};var t={},n=Object.keys(e),o,r;for(r=0;r<n.length;r++)o=n[r],!(a.indexOf(o)>=0)&&(t[o]=e[o]);return t}function Pe(e){var a=e.colorAccessor,t=Ue(e,Ge);return S.createElement(We,te({},t,{colorAccessor:a,BarsComponent:Ie}))}const ae=he.div`
    width: 100%;
    height: 100%;
    position: relative;
`,ne=he(Pe)`
    & {
        cursor: pointer;

        ${e=>e.$isEmpty&&"pointer-events: none;"}

        ${e=>e.$hasSelectedItem&&"opacity: 0.3;"}

        :hover {
            filter: drop-shadow(0px -2px 5px rgba(33, 23, 95, 0.3));
            opacity: 1;
        }

        :focus {
            outline: none;
            opacity: 1;
        }
    }
`;try{ae.displayName="ChartWrapper",ae.__docgenInfo={description:"",displayName:"ChartWrapper",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}}}catch{}try{ne.displayName="StyledBarSeries",ne.__docgenInfo={description:"",displayName:"StyledBarSeries",props:{onFocus:{defaultValue:null,description:`Callback invoked for onFocus events for the nearest Datum to the FocusEvent.
XYChart will NOT capture and emit FocusEvents, they are emitted from individual Series glyph shapes.`,name:"onFocus",required:!1,type:{name:"(({ datum, distanceX, distanceY, event, index, key, svgPoint, }: EventHandlerParams<object>) => void)"}},onBlur:{defaultValue:null,description:`Callback invoked for onBlur events for the nearest Datum to the FocusEvent.
XYChart will NOT capture and emit FocusEvents, they are emitted from individual Series glyph shapes.`,name:"onBlur",required:!1,type:{name:"((event: FocusEvent<Element>) => void)"}},onPointerDown:{defaultValue:null,description:`Callback invoked for onPointerDown events for the nearest Datum to the PointerEvent.
By default XYChart will capture and emit PointerEvents, invoking this function for
any Series with a defined handler. Alternatively you may set <XYChart captureEvents={false} />
and Series will emit their own events.`,name:"onPointerDown",required:!1,type:{name:"(({ datum, distanceX, distanceY, event, index, key, svgPoint, }: EventHandlerParams<object>) => void)"}},onPointerMove:{defaultValue:null,description:`Callback invoked for onPointerMove events for the nearest Datum to the PointerEvent.
By default XYChart will capture and emit PointerEvents, invoking this function for
any Series with a defined handler. Alternatively you may set <XYChart captureEvents={false} />
and Series will emit their own events.`,name:"onPointerMove",required:!1,type:{name:"(({ datum, distanceX, distanceY, event, index, key, svgPoint, }: EventHandlerParams<object>) => void)"}},onPointerUp:{defaultValue:null,description:`Callback invoked for onPointerUp events for the nearest Datum to the PointerEvent.
By default XYChart will capture and emit PointerEvents, invoking this function for
any Series with a defined handler. Alternatively you may set <XYChart captureEvents={false} />
and Series will emit their own events.`,name:"onPointerUp",required:!1,type:{name:"(({ datum, distanceX, distanceY, event, index, key, svgPoint, }: EventHandlerParams<object>) => void)"}},onPointerOut:{defaultValue:null,description:`Callback invoked for onPointerOut events. By default XYChart will capture and emit
PointerEvents, invoking this function for any Series with a defined handler.
Alternatively you may set <XYChart captureEvents={false} /> and Series will emit
their own events.`,name:"onPointerOut",required:!1,type:{name:"((event: PointerEvent<Element>) => void)"}},data:{defaultValue:null,description:"Data for the Series.",name:"data",required:!0,type:{name:"object[]"}},colorAccessor:{defaultValue:null,description:"Given a Datum, returns its color. Falls back to theme color if unspecified or if a null-ish value is returned.",name:"colorAccessor",required:!1,type:{name:"((d: object, index: number) => string | null)"}},radius:{defaultValue:null,description:"Optional radius to apply to bar corners.",name:"radius",required:!1,type:{name:"number"}},radiusAll:{defaultValue:null,description:"Whether to apply radius to all corners.",name:"radiusAll",required:!1,type:{name:"boolean"}},radiusTop:{defaultValue:null,description:"Whether to apply radius to top corners.",name:"radiusTop",required:!1,type:{name:"boolean"}},radiusRight:{defaultValue:null,description:"Whether to apply radius to right corners.",name:"radiusRight",required:!1,type:{name:"boolean"}},radiusBottom:{defaultValue:null,description:"Whether to apply radius to bottom corners.",name:"radiusBottom",required:!1,type:{name:"boolean"}},radiusLeft:{defaultValue:null,description:"Whether to apply radius to left corners.",name:"radiusLeft",required:!1,type:{name:"boolean"}},dataKey:{defaultValue:null,description:"Required data key for the Series, should be unique across all series.",name:"dataKey",required:!0,type:{name:"string"}},xAccessor:{defaultValue:null,description:"Given a Datum, returns the x-scale value.",name:"xAccessor",required:!0,type:{name:"(d: object) => any"}},yAccessor:{defaultValue:null,description:"Given a Datum, returns the y-scale value.",name:"yAccessor",required:!0,type:{name:"(d: object) => any"}},enableEvents:{defaultValue:null,description:"Whether the Series emits and subscribes to PointerEvents and FocusEvents (including Tooltip triggering).",name:"enableEvents",required:!1,type:{name:"boolean"}},barPadding:{defaultValue:null,description:"Specify bar padding when bar thickness does not come from a `band` scale.\nAccepted values are [0, 1], 0 = no padding, 1 = no bar, defaults to 0.1.",name:"barPadding",required:!1,type:{name:"number"}},$hasSelectedItem:{defaultValue:null,description:"",name:"$hasSelectedItem",required:!1,type:{name:"boolean"}},$isEmpty:{defaultValue:null,description:"",name:"$isEmpty",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}}}catch{}function re({formattedValue:e,limit:a,...t}){if(e===void 0||typeof e!="string")return null;const n=e.slice(0,a),o=e.length!==n.length,r=n+(o?"â€¦":"");return s.jsx(ve,{content:o?e:void 0,children:s.jsx(_e,{...t,pointerEvents:"all",children:r})})}try{re.displayName="TruncatableTick",re.__docgenInfo={description:"",displayName:"TruncatableTick",props:{className:{defaultValue:null,description:"className to apply to the SVGText element.",name:"className",required:!1,type:{name:"string"}},scaleToFit:{defaultValue:null,description:"Whether to scale the fontSize to accommodate the specified width.",name:"scaleToFit",required:!1,type:{name:'boolean | "shrink-only"'}},angle:{defaultValue:null,description:"Rotational angle of the text.",name:"angle",required:!1,type:{name:"number"}},textAnchor:{defaultValue:null,description:"Horizontal text anchor.",name:"textAnchor",required:!1,type:{name:"enum",value:[{value:'"inherit"'},{value:'"end"'},{value:'"middle"'},{value:'"start"'}]}},verticalAnchor:{defaultValue:null,description:"Vertical text anchor.",name:"verticalAnchor",required:!1,type:{name:"enum",value:[{value:'"end"'},{value:'"middle"'},{value:'"start"'}]}},style:{defaultValue:null,description:"Styles to be applied to the text (and used in computation of its size).",name:"style",required:!1,type:{name:"CSSProperties"}},innerRef:{defaultValue:null,description:"Ref passed to the Text SVG element.",name:"innerRef",required:!1,type:{name:"Ref<SVGSVGElement>"}},innerTextRef:{defaultValue:null,description:"Ref passed to the Text text element",name:"innerTextRef",required:!1,type:{name:"Ref<SVGTextElement>"}},x:{defaultValue:null,description:"x position of the text.",name:"x",required:!1,type:{name:"number"}},y:{defaultValue:null,description:"y position of the text.",name:"y",required:!1,type:{name:"number"}},dx:{defaultValue:null,description:"dx offset of the text.",name:"dx",required:!1,type:{name:"string | number"}},dy:{defaultValue:null,description:"dy offset of the text.",name:"dy",required:!1,type:{name:"string | number"}},lineHeight:{defaultValue:null,description:'Desired "line height" of the text, implemented as y offsets.',name:"lineHeight",required:!1,type:{name:"string | number"}},capHeight:{defaultValue:null,description:"Cap height of the text.",name:"capHeight",required:!1,type:{name:"string | number"}},fontSize:{defaultValue:null,description:"Font size of text.",name:"fontSize",required:!1,type:{name:"string | number"}},fontFamily:{defaultValue:null,description:"Font family of text.",name:"fontFamily",required:!1,type:{name:"string"}},fill:{defaultValue:null,description:"Fill color of text.",name:"fill",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"Maximum width to occupy (approximate as words are not split).",name:"width",required:!1,type:{name:"number"}},children:{defaultValue:null,description:"String (or number coercible to one) to be styled and positioned.",name:"children",required:!1,type:{name:"string | number"}},formattedValue:{defaultValue:null,description:"",name:"formattedValue",required:!0,type:{name:"FormattedValue"}},limit:{defaultValue:null,description:"",name:"limit",required:!1,type:{name:"number"}}}}}catch{}const ye={fontSize:10,fontFamily:"Mulish",fill:be.gray[1700]},x={xScale:{type:"band",paddingInner:.4,paddingOuter:.1},yScale:{type:"linear",nice:!0,round:!0},leftAxisProps:{tickFormat:xe,tickLabelProps:{...ye,textAnchor:"end",width:50},hideAxisLine:!0,hideTicks:!0},maxLengthOfLeftAxisLabel:Le,showLeftAxisLine:!1,bottomAxisProps:{tickFormat:e=>Re(e).format("DD MMM"),tickLabelProps:{...ye,textAnchor:"middle",verticalAnchor:"start",width:20},hideAxisLine:!0,hideTicks:!0},gridProps:{rows:!0,columns:!1,stroke:"#e0e0e0",strokeWidth:1,lineStyle:{}}},Ke=.1;function Ze(e,a,t,n,o){const r=m.useCallback(d=>e.filter(y=>d(y)!==0).length>0?d:y=>Math.max(d(y),o??Ke),[e,o]);return m.useMemo(()=>({xAccessor:a?r(t):t,yAccessor:a?n:r(n)}),[n,t,a,r])}function oe({data:e,isEmpty:a,horizontal:t,xScale:n=x.xScale,yScale:o=x.yScale,maxYDomainForZeroData:r,minYForZeroData:A,margin:d,leftAxisProps:f=x.leftAxisProps,maxLengthOfLeftAxisLabel:y=x.maxLengthOfLeftAxisLabel,showLeftAxisLine:V=x.showLeftAxisLine,bottomAxisProps:E=x.bottomAxisProps,gridProps:q=x.gridProps,popoverRenderer:G}){const[T,F]=m.useState(null),[C,M]=m.useState(null),[L,b]=m.useState(0),p=m.useMemo(()=>({top:(d?.top??0)+30,right:(d?.right??0)+0,bottom:(d?.bottom??0)+35,left:(d?.left??0)+L+6}),[L,d]),h=u=>u.x,_=u=>u.y,v=Ze(e,!!t,h,_,A),R=we(e,!!t,n,h,o,_,r),{computeNumTicks:c,...$}=Q(f,x.leftAxisProps),{computeNumTicks:N,...U}=Q(E,x.bottomAxisProps),k=Q(q,x.gridProps),w=m.useMemo(()=>`bar${t?"-horizontal":""}`,[t]),I=m.useCallback((u,i)=>{if(a)return be.transparent;const l=u.colorScheme??z,g=ce[l];if(i===T||i===C)return g.mainColor;const P=(t?v.xAccessor(u):v.yAccessor(u))<0;return`url(#${w}-${l}${P?"-inversed":""})`},[T,C,w,a,v,t]),Y=()=>{const u=[...new Set([...e.map(i=>i.colorScheme).filter(i=>i!==void 0),z])];return s.jsx(s.Fragment,{children:u.map(i=>{const l=ce[i??z],{mainColor:g}=l,{alternativeColor:P}=l,H=t?P:g,B=t?g:P,O=`${w}-${i}`,X=`${O}-inversed`;return s.jsxs(s.Fragment,{children:[s.jsx(pe,{id:O,from:H,to:B,vertical:!t,...t?{fromOpacity:.6}:{toOpacity:.6}},O),s.jsx(pe,{id:X,from:B,to:H,vertical:!t,...t?{toOpacity:.6}:{fromOpacity:.6}},X)]})})})};return e.length?s.jsx(ae,{children:s.jsx(Ae,{children:({width:u,height:i})=>s.jsxs(Oe,{width:u,height:i,margin:p,captureEvents:!1,horizontal:t,...R,children:[Y(),s.jsx(me,{orientation:"left",numTicks:c?.(u,i,p,e),tickComponent:l=>s.jsx(re,{...l,limit:y}),...$}),s.jsx(De,{setLeftMargin:b,formatter:f?.tickFormat??xe,maxMargin:45,numOfTicks:c?.(u,i,p,e)}),s.jsx(me,{orientation:"bottom",numTicks:N?.(u,i,p,e),...U}),s.jsx(je,{...k}),k.columns&&s.jsx("line",{x1:p.left,x2:p.left,y1:0,y2:i-p.bottom,stroke:"white",strokeWidth:2}),V&&s.jsx("line",{x1:p.left,x2:p.left,y1:0,y2:i-p.bottom,stroke:k?.stroke}),s.jsx(ne,{as:Pe,$hasSelectedItem:T!==null,$isEmpty:a,dataKey:"bar-seria-0",data:e,radius:4,radiusTop:!0,radiusBottom:t,onBlur:()=>F(null),onFocus:({index:l})=>F(l),colorAccessor:I,onPointerMove:({index:l})=>M(l),onPointerOut:()=>M(null),...v}),s.jsx(Fe,{snapTooltipToDatumX:!0,snapTooltipToDatumY:!0,unstyled:!0,applyPositionStyle:!0,renderTooltip:({tooltipData:l})=>l?.nearestDatum&&s.jsx(ve,{open:!0,defaultOpen:!0,align:t?{offset:[0,20]}:void 0,placement:t?"bottomRight":"topLeft",content:G?.(l.nearestDatum.datum)},`${h(l.nearestDatum.datum)}`)},Math.random())]})})}):s.jsx(oe,{...Be(),isEmpty:!0})}try{oe.displayName="BarChart",oe.__docgenInfo={description:"",displayName:"BarChart",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Datum[]"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!1,type:{name:"boolean"}},horizontal:{defaultValue:null,description:"",name:"horizontal",required:!1,type:{name:"boolean"}},xScale:{defaultValue:{value:"barChartDefault.xScale"},description:"",name:"xScale",required:!1,type:{name:"Scale"}},yScale:{defaultValue:{value:"barChartDefault.yScale"},description:"",name:"yScale",required:!1,type:{name:"Scale"}},maxYDomainForZeroData:{defaultValue:null,description:"",name:"maxYDomainForZeroData",required:!1,type:{name:"number"}},minYForZeroData:{defaultValue:null,description:"",name:"minYForZeroData",required:!1,type:{name:"number"}},margin:{defaultValue:null,description:"",name:"margin",required:!1,type:{name:"Partial<Margin>"}},leftAxisProps:{defaultValue:{value:"barChartDefault.leftAxisProps"},description:"",name:"leftAxisProps",required:!1,type:{name:"AxisProps"}},showLeftAxisLine:{defaultValue:{value:"barChartDefault.showLeftAxisLine"},description:"",name:"showLeftAxisLine",required:!1,type:{name:"boolean"}},maxLengthOfLeftAxisLabel:{defaultValue:{value:"barChartDefault.maxLengthOfLeftAxisLabel"},description:"",name:"maxLengthOfLeftAxisLabel",required:!1,type:{name:"number"}},bottomAxisProps:{defaultValue:{value:"barChartDefault.bottomAxisProps"},description:"",name:"bottomAxisProps",required:!1,type:{name:"AxisProps"}},gridProps:{defaultValue:{value:"barChartDefault.gridProps"},description:"",name:"gridProps",required:!1,type:{name:"GridProps"}},popoverRenderer:{defaultValue:null,description:"",name:"popoverRenderer",required:!1,type:{name:"((datum: Datum) => ReactNode)"}}}}}catch{}export{oe as B,Ke as D};
